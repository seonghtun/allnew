<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Project</title>
    <script>
        function getHello() {
            const xhr = new XMLHttpRequest();
            const method = "GET";
            var url = "/netflix-total";
            const element = document.getElementById("title");
            console.log(element)
            const inputVal = element.options[element.selectedIndex].value;
            // print(inputVal)
            console.log(inputVal)
            url += "?title=" + inputVal
            xhr.open(method, url);
            xhr.send();

            xhr.onreadystatechange = function () {
                if (xhr.readyState !== 4) return;

                if (xhr.status === 200) {
                    console.log(xhr.responseText);
                    const element = document.getElementById("test");
                    element.innerHTML = xhr.responseText;
                } else {
                    console.log("HTTP error", xhr.status, xhr.statusText);
                }
            };
        }

        function getSelect() {
            const xhr = new XMLHttpRequest();
            const method = "GET";
            const url = "/select";
            xhr.open(method, url);
            xhr.setRequestHeader("content-type", "application/json");
            xhr.send();

            xhr.onload = () => {
                if (xhr.status === 200) {
                    const res = JSON.parse(xhr.response);
                    console.log(res);
                    const element = document.getElementById("ss2");
                    element.innerHTML = JSON.stringify(res);
                } else {
                    console.log("HTTP error", xhr.status, xhr.statusText);
                }
            };
        }

        function getRandom() {
            const xhr = new XMLHttpRequest();
            const method = "GET";
            const url = "/randomUUID";
            xhr.open(method, url);
            xhr.send();

            xhr.onreadystatechange = function () {
                if (xhr.readyState !== 4) return;

                if (xhr.status === 200) {
                    console.log(xhr.responseText);
                    const element = document.getElementById("ss3");
                    element.innerHTML = xhr.responseText;
                } else {
                    console.log("HTTP error", xhr.status, xhr.statusText);
                }
            };
            var data = new FormData();
            data.append('title', document.getElementById("title").value);
            data.append('pwd', 'password');
            data.append('organization', 'place');
            data.append('requiredkey', 'key');

            xhr.open('POST', 'somewhere', true);
            xhr.onload = function () {
                // do something to response
                console.log(this.responseText);
            };
            xhr.send(data);
        }

        function getUsers() {
            const xhr = new XMLHttpRequest();
            const method = "GET";
            const url = "/users";
            xhr.open(method, url);
            xhr.setRequestHeader("content-type", "application/json");
            xhr.send();

            xhr.onload = function () {
                // do something to response
                console.log(this.responseText);
            };
            xhr.send('user=person&pwd=password&organization=place&requiredkey=key');
            xhr.onload = () => {
                if (xhr.status === 200) {
                    const res = JSON.parse(xhr.response);
                    console.log(res);
                    const element = document.getElementById("ss4");
                    element.innerHTML = JSON.stringify(res);
                } else {
                    console.log("HTTP error", xhr.status, xhr.statusText);
                }
            };
        }
    </script>
</head>

<body>
    <nav class="navbar">
        <div class="navbar__logo">
            <i class="fab fa-accusoft"></i>
            <a href="/">DreamCoding</a>
        </div>

        <ul class="navbar__menu">
            <li><a href="/">Home</a></li>
            <li><a href="http://192.168.1.10:8000/tourist">tourist</a></li>
            <li><a href="/netflix">netflix</a></li>
            <li><a href="/justone">JustOne</a></li>
        </ul>

        <ul class="navbar__icons">
            <li><i class="fab fa-twitter"></i></li>
            <li><i class="fab fa-facebook-f"></i></li>
        </ul>

        <a href="#" class="navbar__toogleBtn">
            <i class="fas fa-bars"></i>
        </a>
    </nav>
    <h3>Project</h3>
    <hr />
    <input type="button" value="Node Hello" onclick="getHello()" />
    <div id="section1">
        <h3>Node Hello</h3>
        <select id="title">
            <option value="0">오징어 게임</option>
            <option value="1">지금 우리 학교는</option>
            <option value="2">갯마을 차차차</option>
            <option value="3">더 글로리</option>
        </select>
        <div>
            <p id="test"></p>
        </div>
    </div>
    <hr />
    <input type="button" value="Node Select" onclick="getSelect()" />
    <div id="section2">
        <h3>Node Select</h3>
        <span id="ss2"></span>
    </div>
    <hr />
    <input type="button" value="Python randomUUID" onclick="getRandom()" />
    <div id="section2">
        <h3>Python randomUUID</h3>
        <span id="ss3"></span>
    </div>
    <hr />
    <input type="button" value="JSON-Server Users" onclick="getUsers()" />
    <div id="section3">
        <h3>Json-server users</h3>
        <span id="ss4"></span>
    </div>
    </form>
    <hr />
</body>

</html>