<!DOCTYPE html>
<!-- 이 부분은 주석문 입니당.-->
<html>

<head>
    <meta charset="utf-8">
    <title>
        User Authentication
    </title>
    <link href="dynamic.css" type="text/css" rel="stylesheet">
    <script>
        let id;
        function getParameter(name) {
            var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                results = regex.exec(location.search);
            return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
        }
        function sessionStore() {
            id = getParameter('id');
            let now = new Date();
            if (!window.sessionStorage) {
                alert('세션 스토리지를 지원하지 않습니다.');
                return;
            }
            sessionStorage.setItem(id, now);
            alert(`사용자 ${id} 님이 로그인 하셨습니다.`);
        }
        function logOut() {
            let check = confirm("로그아웃 하시겠습니까?")
            if (check) {
                sessionStorage.removeItem(id);
                window.location = '/login-page';
            }
        }
    </script>
</head>

<body class="user-body" onload="sessionStore()">
    <h3 class="head-text">User Authentication</h3>
    <hr>
    <form name="userForm" target="targetURL" action="/insert" method="post">
        <p>Userid : <input type="text" size="15" name="id"></p>
        <p>Password : <input type="password" size="15" name="pw"></p>
        <input type="button" value="get select" onclick="document.targetURL.location.href='/select'">
        &nbsp;&nbsp;
        <input type="button" value="get selectQuery"
            onclick='document.targetURL.location.href="/selectQuery?id="+document.userForm.id.value'>
        &nbsp;&nbsp;
        <input type="submit" value="사용자추가">
        &nbsp;&nbsp;
        <button type="submit" formaction="/update">post update</button>
        &nbsp;&nbsp;
        <input type="submit" formaction="/delete" value="post delete">
        <p>
            <a href="javascript:logOut()" class="base-a">LOGOUT</a>
        </p>
    </form>
    <br>
    <iframe name="targetURL" width="30%" height="500" style="border:none"></iframe>
</body>

</html>